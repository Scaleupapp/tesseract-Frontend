{"ast":null,"code":"var _jsxFileName = \"/Users/nirpekshnandan/Downloads/enterprise-platform/src/pages/OrganisationPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport API from '../utils/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst componentMapping = {\n  budget: 'Budget Management',\n  taskManagement: 'Task Management',\n  documentation: 'Documentation Management'\n};\nconst OrganisationPage = () => {\n  _s();\n  const {\n    orgId\n  } = useParams();\n  const [organisation, setOrganisation] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [activeTab, setActiveTab] = useState('details');\n  const [openAccordion, setOpenAccordion] = useState(null);\n  const [enabledComponents, setEnabledComponents] = useState({});\n  const [userAssignments, setUserAssignments] = useState({});\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchOrganisationDetails = async () => {\n      try {\n        const {\n          data\n        } = await API.get(`/organisations/${orgId}`, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        setOrganisation(data);\n        const currentUserId = JSON.parse(localStorage.getItem('user'))._id;\n        const adminMember = data.members.find(member => member.userId._id === currentUserId && member.role === 'Admin');\n        setIsAdmin(!!adminMember);\n\n        // Initialize enabled components and user assignments\n        setEnabledComponents(data.servicesEnabled || {});\n        const assignments = {};\n        data.members.forEach(member => {\n          assignments[member.userId._id] = member.servicesAccess || {};\n        });\n        setUserAssignments(assignments);\n      } catch (err) {\n        console.error('Failed to fetch organisation details:', err);\n      }\n    };\n    fetchOrganisationDetails();\n  }, [orgId]);\n  const renderServiceButtons = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-wrap gap-6 justify-center mt-8\",\n    children: Object.keys(componentMapping).map(component => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative bg-white shadow-lg rounded-lg p-6 w-80 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-lg font-bold mb-4\",\n        children: componentMapping[component]\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: `py-3 px-6 text-lg font-semibold rounded transition-all duration-300 ${enabledComponents[component] ? \"bg-blue-600 text-white hover:bg-blue-700\" : \"bg-gray-300 text-gray-500 cursor-not-allowed\"}`,\n        onClick: () => enabledComponents[component] && navigate(`/organisation/${orgId}/${component}`),\n        disabled: !enabledComponents[component],\n        children: enabledComponents[component] ? \"Go to Service\" : \"Not Active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 13\n      }, this), !enabledComponents[component] && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm mt-2 text-red-500\",\n        children: \"This service is not active. Activate it from the admin panel.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 15\n      }, this)]\n    }, component, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 7\n  }, this);\n  const handleDeleteOrganisation = async () => {\n    if (window.confirm('Are you sure you want to delete this organisation?')) {\n      try {\n        await API.post('/organisations/delete', {\n          orgId\n        }, {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        alert('Organisation deleted successfully');\n        navigate('/dashboard');\n      } catch (err) {\n        console.error('Failed to delete organisation:', err);\n        alert('Error occurred while deleting the organisation.');\n      }\n    }\n  };\n  const toggleAccordion = section => {\n    setOpenAccordion(prev => prev === section ? null : section);\n  };\n  const handleComponentToggle = component => {\n    setEnabledComponents(prev => ({\n      ...prev,\n      [component]: !prev[component]\n    }));\n  };\n  const handleUserAssignmentToggle = (userId, component) => {\n    setUserAssignments(prev => {\n      var _prev$userId;\n      return {\n        ...prev,\n        [userId]: {\n          ...prev[userId],\n          [component]: !((_prev$userId = prev[userId]) !== null && _prev$userId !== void 0 && _prev$userId[component] || false)\n        }\n      };\n    });\n  };\n  const saveComponentSettings = async () => {\n    try {\n      await API.put('/organisations/update-components', {\n        orgId,\n        components: enabledComponents,\n        assignments: userAssignments\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      alert('Components updated successfully');\n    } catch (err) {\n      console.error('Error updating components:', err);\n      alert('Failed to update components.');\n    }\n  };\n  const renderDetailsTab = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-lg shadow p-8 bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-3xl font-semibold text-gray-800 mb-6\",\n      children: organisation.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Description:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), \" \", organisation.description]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Address:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }, this), \" \", organisation.address]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Contact Email:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }, this), \" \", organisation.contactEmail]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Phone Number:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this), \" \", organisation.phoneNumber]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Website:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), ' ', /*#__PURE__*/_jsxDEV(\"a\", {\n        href: organisation.website,\n        target: \"_blank\",\n        rel: \"noopener noreferrer\",\n        className: \"text-blue-600 hover:underline\",\n        children: organisation.website\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700 mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        children: \"Incorporation ID:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this), \" \", organisation.incorporationId]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n  const handleAccessRequest = async (userId, status) => {\n    try {\n      const role = 'Member'; // Define default role for approval; modify as needed\n      await API.post('/organisations/access-request', {\n        orgId,\n        userId,\n        status,\n        role\n      }, {\n        headers: {\n          Authorization: `Bearer ${localStorage.getItem('token')}`\n        }\n      });\n      // Update the local state to reflect the changes\n      setOrganisation(prevOrg => ({\n        ...prevOrg,\n        accessRequests: prevOrg.accessRequests.filter(req => req.userId._id !== userId)\n      }));\n      alert(`Request has been ${status.toLowerCase()}`);\n    } catch (err) {\n      console.error('Error processing access request:', err);\n      alert('An error occurred while processing the request.');\n    }\n  };\n  const renderAccessRequests = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"rounded-lg shadow p-8 bg-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-semibold text-gray-800 mb-6\",\n      children: \"Access Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), organisation.accessRequests && organisation.accessRequests.length > 0 ? organisation.accessRequests.map(request => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-6 p-4 border rounded shadow\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Name:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 15\n        }, this), \" \", request.userId.firstName, \" \", request.userId.lastName]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Email:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 15\n        }, this), \" \", request.userId.email]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAccessRequest(request.userId._id, 'Approved'),\n          className: \"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition\",\n          children: \"Approve\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAccessRequest(request.userId._id, 'Rejected'),\n          className: \"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition\",\n          children: \"Reject\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 13\n      }, this)]\n    }, request._id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 11\n    }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600\",\n      children: \"No pending access requests.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 208,\n    columnNumber: 5\n  }, this);\n  const renderAdminAccordion = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white shadow rounded-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleAccordion('edit'),\n        className: \"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\",\n        children: [\"Org Members & Components\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: openAccordion === 'edit' ? '-' : '+'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 9\n      }, this), openAccordion === 'edit' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/organisation/${orgId}/manage-members-components`),\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\",\n          children: \"Manage Members & Components\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleAccordion('edit'),\n        className: \"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\",\n        children: [\"Edit Organisation\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: openAccordion === 'edit' ? '-' : '+'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), openAccordion === 'edit' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/organisation/${orgId}/edit`),\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\",\n          children: \"Go to Edit Page\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleAccordion('accessRequests'),\n        className: \"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\",\n        children: [\"View Access Requests\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: openAccordion === 'accessRequests' ? '-' : '+'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 9\n      }, this), openAccordion === 'accessRequests' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: \"Access requests are listed here.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 300,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('access-requests'),\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\",\n          children: \"View Access Requests\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 299,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"border-b\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleAccordion('billing'),\n        className: \"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\",\n        children: [\"View Billing Details\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: openAccordion === 'billing' ? '-' : '+'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 9\n      }, this), openAccordion === 'billing' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(`/organisation/${orgId}/billing`),\n          className: \"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\",\n          children: \"View Billing Details\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 312,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleAccordion('delete'),\n        className: \"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\",\n        children: [\"Delete Organisation\", /*#__PURE__*/_jsxDEV(\"span\", {\n          children: openAccordion === 'delete' ? '-' : '+'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this), openAccordion === 'delete' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 bg-gray-50\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleDeleteOrganisation,\n          className: \"bg-red-600 text-white py-2 px-4 rounded-lg shadow hover:bg-red-700 transition\",\n          children: \"Delete Organisation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 243,\n    columnNumber: 5\n  }, this);\n  if (!organisation) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center text-gray-600\",\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 355,\n    columnNumber: 29\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-4 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab(\"details\"),\n        className: `py-2 px-4 rounded ${activeTab === \"details\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-800\"}`,\n        children: \"Organisation Details\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 9\n      }, this), renderServiceButtons(), isAdmin && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setActiveTab(\"admin\"),\n        className: `py-2 px-4 rounded ${activeTab === \"admin\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-800\"}`,\n        children: \"Admin Panel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this), activeTab === \"details\" && renderDetailsTab(), activeTab === \"admin\" && renderAdminAccordion(), activeTab === \"access-requests\" && renderAccessRequests()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 5\n  }, this);\n};\n_s(OrganisationPage, \"VpsYSDqVqb121mkgu865xG1abpU=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = OrganisationPage;\nexport default OrganisationPage;\nvar _c;\n$RefreshReg$(_c, \"OrganisationPage\");","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","API","jsxDEV","_jsxDEV","componentMapping","budget","taskManagement","documentation","OrganisationPage","_s","orgId","organisation","setOrganisation","isAdmin","setIsAdmin","activeTab","setActiveTab","openAccordion","setOpenAccordion","enabledComponents","setEnabledComponents","userAssignments","setUserAssignments","navigate","fetchOrganisationDetails","data","get","headers","Authorization","localStorage","getItem","currentUserId","JSON","parse","_id","adminMember","members","find","member","userId","role","servicesEnabled","assignments","forEach","servicesAccess","err","console","error","renderServiceButtons","className","children","Object","keys","map","component","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","handleDeleteOrganisation","window","confirm","post","alert","toggleAccordion","section","prev","handleComponentToggle","handleUserAssignmentToggle","_prev$userId","saveComponentSettings","put","components","renderDetailsTab","name","description","address","contactEmail","phoneNumber","href","website","target","rel","incorporationId","handleAccessRequest","status","prevOrg","accessRequests","filter","req","toLowerCase","renderAccessRequests","length","request","firstName","lastName","email","renderAdminAccordion","_c","$RefreshReg$"],"sources":["/Users/nirpekshnandan/Downloads/enterprise-platform/src/pages/OrganisationPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport API from '../utils/api';\n\nconst componentMapping = {\n  budget: 'Budget Management',\n  taskManagement: 'Task Management',\n  documentation: 'Documentation Management',\n};\n\nconst OrganisationPage = () => {\n  const { orgId } = useParams();\n  const [organisation, setOrganisation] = useState(null);\n  const [isAdmin, setIsAdmin] = useState(false);\n  const [activeTab, setActiveTab] = useState('details');\n  const [openAccordion, setOpenAccordion] = useState(null);\n  const [enabledComponents, setEnabledComponents] = useState({});\n  const [userAssignments, setUserAssignments] = useState({});\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchOrganisationDetails = async () => {\n        try {\n          const { data } = await API.get(`/organisations/${orgId}`, {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\n            },\n          });\n          setOrganisation(data);\n  \n          const currentUserId = JSON.parse(localStorage.getItem('user'))._id;\n          const adminMember = data.members.find(\n            (member) => member.userId._id === currentUserId && member.role === 'Admin'\n          );\n          setIsAdmin(!!adminMember);\n  \n          // Initialize enabled components and user assignments\n          setEnabledComponents(data.servicesEnabled || {});\n          const assignments = {};\n          data.members.forEach((member) => {\n            assignments[member.userId._id] = member.servicesAccess || {};\n          });\n          setUserAssignments(assignments);\n        } catch (err) {\n          console.error('Failed to fetch organisation details:', err);\n        }\n      };\n  \n      fetchOrganisationDetails();\n    }, [orgId]);\n\n    const renderServiceButtons = () => (\n      <div className=\"flex flex-wrap gap-6 justify-center mt-8\">\n        {Object.keys(componentMapping).map((component) => (\n          <div\n            key={component}\n            className=\"relative bg-white shadow-lg rounded-lg p-6 w-80 text-center\"\n          >\n            <h3 className=\"text-lg font-bold mb-4\">{componentMapping[component]}</h3>\n            <button\n              className={`py-3 px-6 text-lg font-semibold rounded transition-all duration-300 ${\n                enabledComponents[component]\n                  ? \"bg-blue-600 text-white hover:bg-blue-700\"\n                  : \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n              }`}\n              onClick={() =>\n                enabledComponents[component] && navigate(`/organisation/${orgId}/${component}`)\n              }\n              disabled={!enabledComponents[component]}\n            >\n              {enabledComponents[component] ? \"Go to Service\" : \"Not Active\"}\n            </button>\n            {!enabledComponents[component] && (\n              <p className=\"text-sm mt-2 text-red-500\">\n                This service is not active. Activate it from the admin panel.\n              </p>\n            )}\n          </div>\n        ))}\n      </div>\n    );\n  \n\n  const handleDeleteOrganisation = async () => {\n    if (window.confirm('Are you sure you want to delete this organisation?')) {\n      try {\n        await API.post(\n          '/organisations/delete',\n          { orgId },\n          {\n            headers: {\n              Authorization: `Bearer ${localStorage.getItem('token')}`,\n            },\n          }\n        );\n        alert('Organisation deleted successfully');\n        navigate('/dashboard');\n      } catch (err) {\n        console.error('Failed to delete organisation:', err);\n        alert('Error occurred while deleting the organisation.');\n      }\n    }\n  };\n\n  const toggleAccordion = (section) => {\n    setOpenAccordion((prev) => (prev === section ? null : section));\n  };\n\n  \n\n\n  const handleComponentToggle = (component) => {\n    setEnabledComponents((prev) => ({\n      ...prev,\n      [component]: !prev[component],\n    }));\n  };\n\n  const handleUserAssignmentToggle = (userId, component) => {\n    setUserAssignments((prev) => ({\n      ...prev,\n      [userId]: {\n        ...prev[userId],\n        [component]: !(prev[userId]?.[component] || false),\n      },\n    }));\n  };\n\n  const saveComponentSettings = async () => {\n    try {\n      await API.put(\n        '/organisations/update-components',\n        {\n          orgId,\n          components: enabledComponents,\n          assignments: userAssignments,\n        },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        }\n      );\n      alert('Components updated successfully');\n    } catch (err) {\n      console.error('Error updating components:', err);\n      alert('Failed to update components.');\n    }\n  };\n\n  const renderDetailsTab = () => (\n    <div className=\"rounded-lg shadow p-8 bg-white\">\n      <h1 className=\"text-3xl font-semibold text-gray-800 mb-6\">{organisation.name}</h1>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Description:</strong> {organisation.description}\n      </p>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Address:</strong> {organisation.address}\n      </p>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Contact Email:</strong> {organisation.contactEmail}\n      </p>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Phone Number:</strong> {organisation.phoneNumber}\n      </p>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Website:</strong>{' '}\n        <a\n          href={organisation.website}\n          target=\"_blank\"\n          rel=\"noopener noreferrer\"\n          className=\"text-blue-600 hover:underline\"\n        >\n          {organisation.website}\n        </a>\n      </p>\n      <p className=\"text-gray-700 mb-4\">\n        <strong>Incorporation ID:</strong> {organisation.incorporationId}\n      </p>\n    </div>\n  );\n\n  const handleAccessRequest = async (userId, status) => {\n    try {\n      const role = 'Member'; // Define default role for approval; modify as needed\n      await API.post(\n        '/organisations/access-request',\n        { orgId, userId, status, role },\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem('token')}`,\n          },\n        }\n      );\n      // Update the local state to reflect the changes\n      setOrganisation((prevOrg) => ({\n        ...prevOrg,\n        accessRequests: prevOrg.accessRequests.filter((req) => req.userId._id !== userId),\n      }));\n      alert(`Request has been ${status.toLowerCase()}`);\n    } catch (err) {\n      console.error('Error processing access request:', err);\n      alert('An error occurred while processing the request.');\n    }\n  };\n  \n  const renderAccessRequests = () => (\n    <div className=\"rounded-lg shadow p-8 bg-white\">\n      <h2 className=\"text-2xl font-semibold text-gray-800 mb-6\">Access Requests</h2>\n      {organisation.accessRequests && organisation.accessRequests.length > 0 ? (\n        organisation.accessRequests.map((request) => (\n          <div key={request._id} className=\"mb-6 p-4 border rounded shadow\">\n            <p className=\"text-gray-700 mb-2\">\n              <strong>Name:</strong> {request.userId.firstName} {request.userId.lastName}\n            </p>\n            <p className=\"text-gray-700 mb-2\">\n              <strong>Email:</strong> {request.userId.email}\n            </p>\n            <div className=\"flex gap-4\">\n              <button\n                onClick={() => handleAccessRequest(request.userId._id, 'Approved')}\n                className=\"bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition\"\n              >\n                Approve\n              </button>\n              <button\n                onClick={() => handleAccessRequest(request.userId._id, 'Rejected')}\n                className=\"bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition\"\n              >\n                Reject\n              </button>\n            </div>\n          </div>\n        ))\n      ) : (\n        <p className=\"text-gray-600\">No pending access requests.</p>\n      )}\n    </div>\n  );\n\n  const renderAdminAccordion = () => (\n    \n    <div className=\"bg-white shadow rounded-lg\">\n\n          {/* User managemnt */}\n          <div className=\"border-b\">\n        <button\n          onClick={() => toggleAccordion('edit')}\n          className=\"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\"\n        >\n          Org Members & Components\n          <span>{openAccordion === 'edit' ? '-' : '+'}</span>\n        </button>\n        {openAccordion === 'edit' && (\n          <div className=\"p-4 bg-gray-50\">\n            <button\n              onClick={() => navigate(`/organisation/${orgId}/manage-members-components`)}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\"\n            >\n              Manage Members & Components\n            </button>\n          </div>\n        )}\n      </div>\n\n      \n      {/* Edit Organisation */}\n      <div className=\"border-b\">\n        <button\n          onClick={() => toggleAccordion('edit')}\n          className=\"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\"\n        >\n          Edit Organisation\n          <span>{openAccordion === 'edit' ? '-' : '+'}</span>\n        </button>\n        {openAccordion === 'edit' && (\n          <div className=\"p-4 bg-gray-50\">\n            <button\n              onClick={() => navigate(`/organisation/${orgId}/edit`)}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\"\n            >\n              Go to Edit Page\n            </button>\n          </div>\n        )}\n      </div>\n\n\n      {/* View Access Requests */}\n      <div className=\"border-b\">\n        <button\n          onClick={() => toggleAccordion('accessRequests')}\n          className=\"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\"\n        >\n          View Access Requests\n          <span>{openAccordion === 'accessRequests' ? '-' : '+'}</span>\n        </button>\n        {openAccordion === 'accessRequests' && (\n          <div className=\"p-4 bg-gray-50\">\n            <p className=\"text-gray-700\">Access requests are listed here.</p>\n            <button\n              onClick={() => setActiveTab('access-requests')}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\"\n            >\n              View Access Requests\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* View Billing Details */}\n      <div className=\"border-b\">\n        <button\n          onClick={() => toggleAccordion('billing')}\n          className=\"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\"\n        >\n          View Billing Details\n          <span>{openAccordion === 'billing' ? '-' : '+'}</span>\n        </button>\n        {openAccordion === 'billing' && (\n          <div className=\"p-4 bg-gray-50\">\n            <button\n              onClick={() => navigate(`/organisation/${orgId}/billing`)}\n              className=\"bg-blue-600 text-white py-2 px-4 rounded-lg shadow hover:bg-blue-700 transition\"\n            >\n              View Billing Details\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Delete Organisation */}\n      <div>\n        <button\n          onClick={() => toggleAccordion('delete')}\n          className=\"w-full flex justify-between items-center p-4 text-left text-gray-800 font-semibold focus:outline-none\"\n        >\n          Delete Organisation\n          <span>{openAccordion === 'delete' ? '-' : '+'}</span>\n        </button>\n        {openAccordion === 'delete' && (\n          <div className=\"p-4 bg-gray-50\">\n            <button\n              onClick={handleDeleteOrganisation}\n              className=\"bg-red-600 text-white py-2 px-4 rounded-lg shadow hover:bg-red-700 transition\"\n            >\n              Delete Organisation\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  if (!organisation) return <div className=\"text-center text-gray-600\">Loading...</div>;\n\n  return (\n    <div className=\"p-6 bg-gradient-to-br from-gray-100 to-gray-200 min-h-screen\">\n      <div className=\"flex gap-4 mb-8\">\n        <button\n          onClick={() => setActiveTab(\"details\")}\n          className={`py-2 px-4 rounded ${\n            activeTab === \"details\"\n              ? \"bg-blue-600 text-white\"\n              : \"bg-gray-100 text-gray-800\"\n          }`}\n        >\n          Organisation Details\n        </button>\n\n         {/* Render service buttons */}\n      {renderServiceButtons()}\n        {isAdmin && (\n          <button\n            onClick={() => setActiveTab(\"admin\")}\n            className={`py-2 px-4 rounded ${\n              activeTab === \"admin\"\n                ? \"bg-blue-600 text-white\"\n                : \"bg-gray-100 text-gray-800\"\n            }`}\n          >\n            Admin Panel\n          </button>\n        )}\n        \n      </div>\n\n      {activeTab === \"details\" && renderDetailsTab()}\n      {activeTab === \"admin\" && renderAdminAccordion()}\n      {activeTab === \"access-requests\" && renderAccessRequests()}\n    </div>\n  );\n};\n\nexport default OrganisationPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}